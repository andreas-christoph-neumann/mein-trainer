<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, interactive-widget=resizes-content">
    <title>Svenska Trainer</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://unpkg.com/dexie/dist/dexie.js"></script>
    <style>
        :root { --primary: #0051a8; --accent: #ffcd00; --bg: #f4f4f4; }
        body { font-family: sans-serif; margin: 0; background: var(--bg); display: flex; flex-direction: column; height: 100dvh; }
        header { background: var(--primary); color: white; padding: 1rem; display: flex; justify-content: space-between; align-items: center; }
        
        #app { flex: 1; display: flex; flex-direction: column; padding: 1rem; overflow-y: auto; }
        .card { background: white; padding: 1.5rem; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center; margin-bottom: 1rem; }
        .word-prompt { font-size: 1.8rem; font-weight: bold; color: #333; margin-bottom: 5px; }
        .sentence-hint { font-size: 1rem; color: #666; font-style: italic; min-height: 1.2rem; }
        
        .controls { padding: 1rem; background: white; border-top: 1px solid #ddd; }
        .helper-bar { display: flex; gap: 10px; justify-content: center; margin-bottom: 10px; }
        .helper-btn { padding: 10px 15px; font-size: 1.2rem; border: 1px solid #ccc; border-radius: 5px; background: #eee; }
        input { width: 100%; padding: 12px; font-size: 1rem; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .action-btn { width: 100%; padding: 15px; margin-top: 10px; background: var(--primary); color: white; border: none; border-radius: 8px; font-size: 1.1rem; }
        
        .hidden { display: none; }
        .feedback { margin-top: 10px; font-weight: bold; text-align: center; }
        #vocab-list div { border-bottom: 1px solid #eee; padding: 10px; background: white; margin-bottom: 5px; border-radius: 5px; }
        
        .edit-btn { background: var(--accent); color: #333; border: none; padding: 5px 8px; border-radius: 3px; font-size: 0.8rem; margin-right: 5px; cursor: pointer; display: inline-flex; align-items: center; }
        .delete-btn { background: #ff4444; color: white; border: none; padding: 5px 10px; border-radius: 3px; font-size: 0.8rem; cursor: pointer; }
    </style>
</head>
<body>

<header>
    <div>
        <span id="stats">Lädt...</span>
        <button onclick="forceUpdate()" style="background: #ff4444; color: white; border: none; padding: 5px 8px; border-radius: 5px; font-size: 0.7rem; margin-left: 10px;">Reset</button>
    </div>
    <button onclick="toggleView()" id="viewBtn">Vokabeln verwalten</button>
</header>

<div id="app">
    <div id="learn-view">
        <div class="card">
            <div id="direction-label" style="font-size: 0.9rem; color: var(--primary); margin-bottom: 8px; display: flex; align-items: center; justify-content: center;"></div>
            <div class="word-prompt" id="display-prompt">Bitte Vokabeln hinzufügen!</div>
            <div class="sentence-hint" id="display-sentence"></div>
            <div id="feedback-area" class="feedback"></div>
        </div>
    </div>

    <div id="add-view" class="hidden">
        <h3 id="form-title">Neue Vokabel hinzufügen</h3>
        <input type="text" id="input-sv" placeholder="Schwedisches Wort" autocapitalize="sentences">
        <input type="text" id="input-sent-sv" placeholder="Schwedischer Beispielsatz (optional)" style="margin-top:5px; font-size: 0.9rem;" autocapitalize="sentences">
        
        <input type="text" id="input-de" placeholder="Deutsche Bedeutung" style="margin-top:15px" autocapitalize="sentences">
        <input type="text" id="input-sent-de" placeholder="Deutscher Beispielsatz (optional)" style="margin-top:5px; font-size: 0.9rem;" autocapitalize="sentences">
        
        <button class="action-btn" id="save-vocab-btn" onclick="addVocab()">Speichern (Beide Richtungen)</button>
        <button class="action-btn hidden" id="cancel-edit-btn" onclick="resetForm()" style="background: #888; margin-top: 5px;">Abbrechen</button>